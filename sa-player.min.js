var audioPlayer=function(){"use strict";var e=null,t={audio:document.getElementById("audio"),playerButtons:{largeToggleBtn:document.querySelector(".large-toggle-btn"),nextTrackBtn:document.querySelector(".next-track-btn"),previousTrackBtn:document.querySelector(".previous-track-btn"),smallToggleBtn:document.getElementsByClassName("small-toggle-btn")},progressBar:document.querySelector(".progress-box"),playListRows:document.getElementsByClassName("play-list-row"),trackInfoBox:document.querySelector(".track-info-box")},r=!1,a=t.progressBar.children[0].children[0].children[1],n=!1,o=function(e){var r=t.progressBar.offsetLeft,a=t.progressBar.offsetTop,n={x:null,y:null};return"ontouchstart"in window?(n.x=e.clientX-r,n.y=e.clientY-a,n):e.offsetX||0===e.offsetX?(n.x=e.offsetX,n.y=e.offsetY,n):e.layerX||0===e.layerX?(n.x=e.layerX,n.y=e.layerY,n):void 0},l=function(e){window.addEventListener("mousemove",i,!0),audio.removeEventListener("timeupdate",y,!1),r=!0},s=function(e){if(!0===r){var t=parseFloat(audio.duration),a=parseFloat(function(e){var t=document.querySelector(".progress-box");return(o(e).x-t.offsetLeft)/t.children[0].offsetWidth}(e));window.removeEventListener("mousemove",i,!0),audio.currentTime=t*a,audio.addEventListener("timeupdate",y,!1),r=!1}},i=function(e){var r,n,l=t.progressBar.offsetLeft,s=t.progressBar.children[0].children[0].children[1],i=a.offsetWidth,u=o(e).x;n=t.progressBar.children[0].offsetWidth-i,(r=u-l)>=1&&r<=n&&(s.style.left=r+".px"),r<0&&(s.style.left="0"),r>n&&(s.style.left=n+"px")},u=function(){t.audio.paused?(t.audio.play(),g(!0),document.title="â–¶ "+document.title):(t.audio.pause(),g(!1),document.title=document.title.substr(2))},d=function(){var r=t.audio.children[e-1].src;t.audio.setAttribute("src",r),t.audio.load(),n=!0,p(e,t.playListRows),c(e,t.playListRows),t.trackInfoBox.style.visibility="visible",u()},c=function(e,t){for(var r=0;r<t.length;r++)t[r].children[2].className="track-title";t[e-1].children[2].className="track-title active-track"},p=function(e,t){var r=document.querySelector(".player .info-box .track-info-box .track-title-text"),a=t[e-1].children[2].outerText;r.innerHTML=null,r.innerHTML=a,document.title=a},f=function(){parseInt(e),e=e===t.playListRows.length?1:e+1,n=!1,v(),d()},y=function(){var e=document.querySelector(".player .info-box .track-info-box .audio-time .current-time"),r=audio.currentTime,a=audio.duration,n=document.querySelector(".player .info-box .track-info-box .audio-time .duration"),o=m(r),l=m(a);e.innerHTML=null,e.innerHTML=o,n.innerHTML=null,n.innerHTML=l,B(audio),function(e){var r=100*e.buffered.end(0)/e.duration;t.progressBar.children[0].children[0].children[0].style.width=r+"%"}(audio)},m=function(e){var t=0,r=Math.floor(e);return(t=(t=Math.floor(r/60))>=10?t:"0"+t)+":"+(r=(r=Math.floor(r%60))>=10?r:"0"+r)},g=function(r){r?(t.playerButtons.largeToggleBtn.children[0].className="large-pause-btn",t.playerButtons.smallToggleBtn[e-1].children[0].className="small-pause-btn"):(t.playerButtons.largeToggleBtn.children[0].className="large-play-btn",t.playerButtons.smallToggleBtn[e-1].children[0].className="small-play-btn"),1===e?(t.playerButtons.previousTrackBtn.disabled=!0,t.playerButtons.previousTrackBtn.className="previous-track-btn disabled"):e>1&&e!==t.playListRows.length?(t.playerButtons.previousTrackBtn.disabled=!1,t.playerButtons.previousTrackBtn.className="previous-track-btn",t.playerButtons.nextTrackBtn.disabled=!1,t.playerButtons.nextTrackBtn.className="next-track-btn"):e===t.playListRows.length&&(t.playerButtons.nextTrackBtn.disabled=!0,t.playerButtons.nextTrackBtn.className="next-track-btn disabled")},B=function(){var e,r=parseFloat(t.audio.currentTime),n=parseFloat(t.audio.duration);e=(parseFloat(t.progressBar.offsetWidth)-parseFloat(a.offsetWidth))*(r/n),a.style.left=e+"px"},v=function(){var e=t.playerButtons.smallToggleBtn;t.playerButtons.largeToggleBtn.children[0].className="large-play-btn";for(var r=0;r<e.length;r++)"small-pause-btn"===e[r].children[0].className&&(e[r].children[0].className="small-play-btn")};return{initPlayer:function(){1!==e&&null!==e||(t.playerButtons.previousTrackBtn.disabled=!0);for(var r=0;r<t.playListRows.length;r++){var o=t.playerButtons.smallToggleBtn[r];t.playListRows[r].children[2].children[0].addEventListener("click",function(t){t.preventDefault();var r=parseInt(this.parentNode.parentNode.getAttribute("data-track-row"));r!==e&&(v(),e=null,n=!1),!1===n?(e=parseInt(r),d()):u(this)},!1),o.addEventListener("click",function(t){t.preventDefault();var r=parseInt(this.parentNode.getAttribute("data-track-row"));r!==e&&(v(),e=null,n=!1),!1===n?(e=parseInt(r),d()):u(this)},!1)}t.audio.addEventListener("timeupdate",y,!1),t.audio.addEventListener("ended",function(e){f()},!1),t.audio.addEventListener("error",function(e){switch(e.target.error.code){case e.target.error.MEDIA_ERR_ABORTED:alert("You aborted the video playback.");break;case e.target.error.MEDIA_ERR_NETWORK:alert("A network error caused the audio download to fail.");break;case e.target.error.MEDIA_ERR_DECODE:alert("The audio playback was aborted due to a corruption problem or because the video used features your browser did not support.");break;case e.target.error.MEDIA_ERR_SRC_NOT_SUPPORTED:alert("The video audio not be loaded, either because the server or network failed or because the format is not supported.");break;default:alert("An unknown error occurred.")}trackLoaded=!1,v()},!1),t.playerButtons.largeToggleBtn.addEventListener("click",function(t){!1===n?(e=parseInt(1),d()):u()},!1),t.playerButtons.nextTrackBtn.addEventListener("click",function(t){!0!==this.disabled&&(e++,n=!1,v(),d())},!1),t.playerButtons.previousTrackBtn.addEventListener("click",function(t){!0!==this.disabled&&(e--,n=!1,v(),d())},!1),a.addEventListener("mousedown",l,!1),window.addEventListener("mouseup",s,!1)}}};(new audioPlayer).initPlayer();
